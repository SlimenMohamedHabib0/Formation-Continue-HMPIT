<div class="page-body">
  <div class="page-header mb-4">
    <div>
      <div class="page-title">Mes résultats</div>
      <div class="page-subtitle">Historique des tentatives</div>
    </div>
    
    <div class="filters">
      <input
        class="form-control"
        style="min-width: 260px"
        placeholder="Rechercher un cours..."
        [(ngModel)]="search"
        (input)="onSearchChange()"
      />

      <select class="form-select" style="min-width: 180px" [(ngModel)]="statut" (change)="onFilterChange()">
        <option value="">Tous</option>
        <option value="REUSSI">Réussi</option>
        <option value="ECHOUE">Échoué</option>
      </select>
    </div>
  </div>

  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <div *ngIf="loading" class="text-center py-4">
    <div class="spinner-border text-primary"></div>
  </div>

  <div *ngIf="!loading" class="card">
    <div class="card-body">
      <div *ngIf="!view.length" class="text-secondary">Aucun résultat.</div>

      <div class="table-responsive" *ngIf="view.length">
        <table class="table table-vcenter">
          <thead>
            <tr>
              <th>Cours</th>
              <th>Date</th>
              <th>Note</th>
              <th>Statut</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let a of view">
              <td class="text-truncate" style="max-width: 420px">{{ a.courseTitre }}</td>
              <td>{{ formatDate(a.dateTentative) }}</td>
              <td>{{ a.noteSur20 }}/20</td>
              <td>
                <span class="badge" [ngClass]="badgeClass(a.statutTentative)">
                  {{ labelStatus(a.statutTentative) }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>
